plugins {
    id "org.jetbrains.intellij" version "0.2.13"
}

apply plugin: 'org.jetbrains.intellij'
apply plugin: 'java'

// On travis, we don't want to deploy to Jetbrains that requires credentials
if (project.file('gradle.properties').exists()) {
    apply from: "gradle.properties"
}

intellij {
    version = '2017.1.4'
    updateSinceUntilBuild = true
    pluginName = 'Key-Promoter-X'
}

String myChangeNotes = file('resources/META-INF/change-notes.html').text
String myDescription = file('resources/META-INF/description.html').text

patchPluginXml {
    changeNotes = myChangeNotes
    pluginDescription = myDescription
    sinceBuild = '162'
}

repositories {
    mavenCentral()
}

sourceSets {
    main {
        java.srcDir 'src'
        resources.srcDir 'resources'
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '3.5'
}

version '5.2'